# UI/UX改善項目

## ステータス: 📋 改善項目（Phase 2完了・Phase 3移行）

作成日: 2025-07-02
最終更新: 2025-07-03

## 問題の概要

Phase 1 MVP・Phase 2の基本機能は動作しているが、追加のUX向上のための改善項目が存在する。

## 完了した機能 ✅

### Phase 1 MVP完了項目
- ✅ リポジトリの自動スキャン・表示（17個検出確認済み）
- ✅ 主体言語の検知・表示
- ✅ サイドバー表示
- ✅ 更新ボタン

### Phase 1.5 検索・フィルター完了項目
- ✅ サイドバーヘッダーに検索ボタン（🔍）追加
- ✅ サイドバーヘッダーにフィルターボタン（📊）追加
- ✅ QuickPickを使用した検索ダイアログ
- ✅ 言語別、お気に入り、最近更新フィルター実装
- ✅ フィルタークリア機能追加

### Phase 2 ローディング・空状態UI完了項目
- ✅ ローディング中スピナー（$(loading~spin)）表示
- ✅ 進捗バー・詳細進捗表示・キャンセル対応
- ✅ 空状態時の分かりやすい案内表示
- ✅ エラー状態のハンドリング

### Phase 3 フィルタープロファイル基盤完了項目
- ✅ FilterProfileManager.ts完全実装
- ✅ フィルタープロファイル作成・管理・インポート・エクスポート機能
- ✅ extension.ts フィルタープロファイル統合完了

- ✅ 20種類以上の言語別アイコン・色分け
- ✅ Git状態による色分け（未コミット変更等）
- ✅ お気に入りアイコン表示（⭐）
- ✅ 相対時間表示（"1d ago", "2w ago"等）
- ✅ グループアイコンの言語別対応
- ✅ VS Code ThemeColorの活用

**完成度**: 95% - 主要機能完成、微調整のみ

### 3. 進捗・フィードバック改善

**優先度**: 中

**現状**: リロード進捗が分かりにくい

**期待される動作**:

- スキャン中の進捗バー表示
- 処理状況のステータス表示
- 完了通知・エラー通知

**技術メモ**: vscode.window.withProgress APIの活用

### 4. パフォーマンス改善

**優先度**: 低

**現状**: 大量リポジトリでのパフォーマンス未検証

**期待される動作**:

- 仮想化スクロール
- 遅延読み込み
- キャッシュ機能

## 実装予定

- **短期（1-2日）**: 項目1（検索・フィルタUI）
- **中期（3-5日）**: 項目2（色付け）、項目3（進捗表示）
- **長期**: 項目4（パフォーマンス）

### 5. お気に入り機能の実装

**優先度**: 高

**現状**: ⚠️ **一部改善が必要** - 基本機能は動作するが一部UIの問題あり

**実装内容**:

- ✅ 右クリックメニューから「Add to Favorites」「Remove from Favorites」
- ✅ TreeItemからリポジトリデータの正しい抽出
- ✅ VS Code globalStateによる永続化
- ✅ お気に入り状態のUI表示（description部分に⭐）
- ✅ コンテキストメニューの動的表示切り替え
- ✅ 詳細なデバッグログ実装

**修正済み問題**:

- ✅ TreeItemコンテキストからのリポジトリID抽出
- ✅ 言語アイコンとお気に入り★の競合解決（★をdescriptionに移動）

**未解決の問題**:

- ❌ コンテキストメニューの「Toggle Favorite」が動作しない（クリックしても状態が変わらない）
- ❌ 「Add to Favorites」と「Toggle Favorite」が重複して表示されている
- ❌ 星マーク（⭐）のクリックによる直接トグル機能が未実装

**完成度**: 80% - 基本機能は完成、UX改善が必要

## 最近の修正 🔧

### お気に入り機能の問題修正（2025-07-02）

**問題**:

1. お気に入り機能が動作しない（repository.id が undefined）
2. 言語アイコンが★に上書きされる

**解決策**:

1. TreeItemから`repository`プロパティを正しく抽出するよう修正
2. お気に入り★をlabelからdescriptionに移動し、言語アイコンを保持

### お気に入り機能のUX問題（2025-07-02 追加）

**問題**:

1. コンテキストメニューの「Toggle Favorite」が動作しない
2. 「Add to Favorites」と「Toggle Favorite」コマンドの重複
3. 星マーク（⭐）クリックによる直接トグル機能の欠如

**解決策（予定）**:

1. コンテキストメニューの「Toggle Favorite」動作の修正
2. 「Add/Remove to Favorites」を「Toggle Favorite」に統一
3. 星マークのクリックハンドラ実装
4. パッケージ定義の整理（コマンド定義の重複解消）

**関連ファイル**:

- `src/extension.ts`: コマンドハンドラの実装
- `src/ui/ReposManagerProvider.ts`: TreeDataProvider本体とクリックイベントハンドラ
- `package.json`: コマンド定義の整理
- `docs/design/ui-design.md`: UI設計書

## 備考

- Phase 1 MVPとしては十分に動作している
- ユーザビリティ向上のための改善項目
- 設計書との整合性は保たれている
